<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard | SES_MINE</title>
  <link rel="icon" type="image/png" href="https://cdn.grapesjs.com/workspaces/cmjdh0oo603xm12grpuiruk7p/assets/f6b95b3d-49d1-4e77-b952-49ed80c4befa__image-9-14-1404-ap-at-8.42-pm.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * { font-family: 'Inter', sans-serif; }
    .gradient-text { 
      background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%); 
      -webkit-background-clip: text; 
      -webkit-text-fill-color: transparent; 
    }
    .stat-card {
      transition: all 0.3s ease;
    }
    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(139, 92, 246, 0.3);
    }
  </style>
</head>
<body class="bg-slate-950 text-white">
  <!-- Top Navigation -->
  <nav class="fixed w-full z-50 bg-slate-900/95 backdrop-blur-xl border-b border-slate-800">
    <div class="max-w-7xl mx-auto px-6 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-8">
          <a href="admin-dashboard.html" class="flex items-center gap-3">
            <img src="https://cdn.grapesjs.com/workspaces/cmjdh0oo603xm12grpuiruk7p/assets/f6b95b3d-49d1-4e77-b952-49ed80c4befa__image-9-14-1404-ap-at-8.42-pm.png" alt="SES_MINE" class="h-12">
          </a>
          <div class="hidden md:flex items-center gap-6">
            <a href="admin-dashboard.html" class="text-purple-500 font-semibold">
              <i class="fas fa-chart-line mr-2"></i>Dashboard
            </a>
            <a href="content-management.html" class="text-gray-400 hover:text-white transition-colors">
              <i class="fas fa-edit mr-2"></i>Content
            </a>
            <a href="user-management.html" class="text-gray-400 hover:text-white transition-colors">
              <i class="fas fa-users mr-2"></i>Users
            </a>
          </div>
        </div>
        <div class="flex items-center gap-4">
          <div class="relative">
            <button class="relative text-gray-400 hover:text-white transition-colors">
              <i class="fas fa-bell text-xl"></i>
              <span class="absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-xs flex items-center justify-center">3</span>
            </button>
          </div>
          <div class="flex items-center gap-3">
            <img src="https://i.pravatar.cc/100?img=5" alt="Admin" class="w-10 h-10 rounded-full border-2 border-purple-500">
            <span class="text-sm font-semibold" id="adminName">Admin User</span>
          </div>
          <button onclick="logout()" class="bg-slate-800 hover:bg-slate-700 px-4 py-2 rounded-lg transition-colors">
            <i class="fas fa-sign-out-alt mr-2"></i>Logout
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="pt-24 pb-12 px-6">
    <div class="max-w-7xl mx-auto">
      <!-- Header -->
      <div class="mb-8">
        <h1 class="text-4xl font-black mb-2">Admin <span class="gradient-text">Dashboard</span></h1>
        <p class="text-gray-400">Welcome back! Here's what's happening with SES_MINE today.</p>
      </div>

      <!-- Stats Grid -->
      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <!-- Total Users -->
        <div class="stat-card bg-gradient-to-br from-purple-500/10 to-purple-900/10 border border-purple-500/20 rounded-2xl p-6">
          <div class="flex items-center justify-between mb-4">
            <div class="w-14 h-14 bg-purple-500/20 rounded-xl flex items-center justify-center">
              <i class="fas fa-users text-purple-400 text-2xl"></i>
            </div>
            <span class="text-green-400 text-sm font-semibold">+12.5%</span>
          </div>
          <div class="text-3xl font-black mb-1" id="totalUsers">1,247</div>
          <div class="text-gray-400 text-sm">Total Users</div>
        </div>

        <!-- Active Projects -->
        <div class="stat-card bg-gradient-to-br from-cyan-500/10 to-cyan-900/10 border border-cyan-500/20 rounded-2xl p-6">
          <div class="flex items-center justify-between mb-4">
            <div class="w-14 h-14 bg-cyan-500/20 rounded-xl flex items-center justify-center">
              <i class="fas fa-project-diagram text-cyan-400 text-2xl"></i>
            </div>
            <span class="text-green-400 text-sm font-semibold">+8.2%</span>
          </div>
          <div class="text-3xl font-black mb-1" id="activeProjects">543</div>
          <div class="text-gray-400 text-sm">Active Projects</div>
        </div>

        <!-- Revenue -->
        <div class="stat-card bg-gradient-to-br from-green-500/10 to-green-900/10 border border-green-500/20 rounded-2xl p-6">
          <div class="flex items-center justify-between mb-4">
            <div class="w-14 h-14 bg-green-500/20 rounded-xl flex items-center justify-center">
              <i class="fas fa-dollar-sign text-green-400 text-2xl"></i>
            </div>
            <span class="text-green-400 text-sm font-semibold">+23.1%</span>
          </div>
          <div class="text-3xl font-black mb-1" id="revenue">$87.4K</div>
          <div class="text-gray-400 text-sm">Monthly Revenue</div>
        </div>

        <!-- Support Tickets -->
        <div class="stat-card bg-gradient-to-br from-amber-500/10 to-amber-900/10 border border-amber-500/20 rounded-2xl p-6">
          <div class="flex items-center justify-between mb-4">
            <div class="w-14 h-14 bg-amber-500/20 rounded-xl flex items-center justify-center">
              <i class="fas fa-ticket-alt text-amber-400 text-2xl"></i>
            </div>
            <span class="text-red-400 text-sm font-semibold">+3</span>
          </div>
          <div class="text-3xl font-black mb-1" id="tickets">24</div>
          <div class="text-gray-400 text-sm">Open Tickets</div>
        </div>
      </div>

      <!-- Charts Row -->
      <div class="grid lg:grid-cols-2 gap-6 mb-8">
        <!-- User Growth Chart -->
        <div class="bg-slate-900/50 backdrop-blur-xl border border-slate-800 rounded-2xl p-6">
          <div class="flex items-center justify-between mb-6">
            <h3 class="text-xl font-bold">User Growth</h3>
            <select class="bg-slate-800 border border-slate-700 rounded-lg px-3 py-1 text-sm">
              <option>Last 7 days</option>
              <option>Last 30 days</option>
              <option>Last 90 days</option>
            </select>
          </div>
          <canvas id="userGrowthChart" height="250"></canvas>
        </div>

        <!-- Revenue Chart -->
        <div class="bg-slate-900/50 backdrop-blur-xl border border-slate-800 rounded-2xl p-6">
          <div class="flex items-center justify-between mb-6">
            <h3 class="text-xl font-bold">Revenue Overview</h3>
            <select class="bg-slate-800 border border-slate-700 rounded-lg px-3 py-1 text-sm">
              <option>This Month</option>
              <option>Last Month</option>
              <option>This Year</option>
            </select>
          </div>
          <canvas id="revenueChart" height="250"></canvas>
        </div>
      </div>

      <!-- Recent Activity & Top Products -->
      <div class="grid lg:grid-cols-2 gap-6 mb-8">
        <!-- Recent Users -->
        <div class="bg-slate-900/50 backdrop-blur-xl border border-slate-800 rounded-2xl p-6">
          <div class="flex items-center justify-between mb-6">
            <h3 class="text-xl font-bold">
              <i class="fas fa-user-plus text-purple-500 mr-2"></i>
              Recent Users
            </h3>
            <a href="user-management.html" class="text-purple-400 hover:text-purple-300 text-sm font-semibold">
              View All <i class="fas fa-arrow-right ml-1"></i>
            </a>
          </div>
          <div class="space-y-4" id="recentUsers">
            <!-- Users will be loaded here -->
          </div>
        </div>

        <!-- Top Products -->
        <div class="bg-slate-900/50 backdrop-blur-xl border border-slate-800 rounded-2xl p-6">
          <div class="flex items-center justify-between mb-6">
            <h3 class="text-xl font-bold">
              <i class="fas fa-star text-amber-500 mr-2"></i>
              Top Products
            </h3>
            <a href="content-management.html" class="text-purple-400 hover:text-purple-300 text-sm font-semibold">
              View All <i class="fas fa-arrow-right ml-1"></i>
            </a>
          </div>
          <div class="space-y-4" id="topProducts">
            <!-- Products will be loaded here -->
          </div>
        </div>
      </div>

      <!-- Recent Activity Log -->
      <div class="bg-slate-900/50 backdrop-blur-xl border border-slate-800 rounded-2xl p-6">
        <div class="flex items-center justify-between mb-6">
          <h3 class="text-xl font-bold">
            <i class="fas fa-history text-cyan-500 mr-2"></i>
            Recent Activity
          </h3>
          <button class="text-purple-400 hover:text-purple-300 text-sm font-semibold">
            Clear All
          </button>
        </div>
        <div class="space-y-3" id="activityLog">
          <!-- Activity will be loaded here -->
        </div>
      </div>
    </div>
  </div>

  <script>
    // Initialize Dashboard Data
    const dashboardData = {
      users: [
        { id: 1, name: 'John Smith', email: 'john@globalmine.com', company: 'GlobalMine Corp', plan: 'Professional', joined: '2 hours ago', avatar: 12 },
        { id: 2, name: 'Sarah Johnson', email: 'sarah@minemax.com', company: 'MineMax Ltd', plan: 'Starter', joined: '5 hours ago', avatar: 47 },
        { id: 3, name: 'Michael Chen', email: 'michael@ecomine.com', company: 'EcoMine Inc', plan: 'Professional', joined: '1 day ago', avatar: 33 },
        { id: 4, name: 'Emily Rodriguez', email: 'emily@pacific.com', company: 'Pacific Mining', plan: 'Free', joined: '2 days ago', avatar: 68 },
        { id: 5, name: 'David Thompson', email: 'david@northern.com', company: 'Northern Resources', plan: 'Starter', joined: '3 days ago', avatar: 15 }
      ],
      products: [
        { name: 'AI Cost Calculator', usage: 1247, growth: '+23%', color: 'cyan' },
        { name: 'Equipment Database', usage: 892, growth: '+18%', color: 'purple' },
        { name: 'Analytics Dashboard', usage: 654, growth: '+31%', color: 'blue' },
        { name: 'ESG Dashboard', usage: 432, growth: '+12%', color: 'green' },
        { name: 'AI Predictor', usage: 287, growth: '+45%', color: 'pink' }
      ],
      activities: [
        { type: 'user', icon: 'fa-user-plus', color: 'green', text: 'New user registered: John Smith', time: '5 minutes ago' },
        { type: 'project', icon: 'fa-project-diagram', color: 'cyan', text: 'New project created: Copper Mine Expansion', time: '15 minutes ago' },
        { type: 'payment', icon: 'fa-dollar-sign', color: 'green', text: 'Payment received: $149.00 from MineMax Ltd', time: '1 hour ago' },
        { type: 'support', icon: 'fa-ticket-alt', color: 'amber', text: 'Support ticket opened: Database access issue', time: '2 hours ago' },
        { type: 'content', icon: 'fa-edit', color: 'purple', text: 'Article published: Mining Industry Trends 2026', time: '3 hours ago' },
        { type: 'user', icon: 'fa-user-check', color: 'blue', text: 'User upgraded to Professional plan', time: '4 hours ago' },
        { type: 'system', icon: 'fa-cog', color: 'gray', text: 'System backup completed successfully', time: '6 hours ago' },
        { type: 'security', icon: 'fa-shield-alt', color: 'red', text: 'Failed login attempt detected', time: '8 hours ago' }
      ]
    };

    // Load Recent Users
    function loadRecentUsers() {
      const container = document.getElementById('recentUsers');
      container.innerHTML = dashboardData.users.map(user => `
        <div class="flex items-center justify-between p-4 bg-slate-800/50 rounded-xl hover:bg-slate-800 transition-all">
          <div class="flex items-center gap-3">
            <img src="https://i.pravatar.cc/100?img=${user.avatar}" alt="${user.name}" class="w-12 h-12 rounded-full border-2 border-purple-500">
            <div>
              <div class="font-semibold">${user.name}</div>
              <div class="text-sm text-gray-400">${user.email}</div>
            </div>
          </div>
          <div class="text-right">
            <div class="text-sm font-semibold ${user.plan === 'Professional' ? 'text-purple-400' : user.plan === 'Starter' ? 'text-cyan-400' : 'text-gray-400'}">${user.plan}</div>
            <div class="text-xs text-gray-500">${user.joined}</div>
          </div>
        </div>
      `).join('');
    }

    // Load Top Products
    function loadTopProducts() {
      const container = document.getElementById('topProducts');
      container.innerHTML = dashboardData.products.map(product => `
        <div class="flex items-center justify-between p-4 bg-slate-800/50 rounded-xl hover:bg-slate-800 transition-all">
          <div class="flex items-center gap-3">
            <div class="w-12 h-12 bg-${product.color}-500/20 rounded-xl flex items-center justify-center">
              <i class="fas fa-box text-${product.color}-400"></i>
            </div>
            <div>
              <div class="font-semibold">${product.name}</div>
              <div class="text-sm text-gray-400">${product.usage} users</div>
            </div>
          </div>
          <div class="text-green-400 font-semibold">${product.growth}</div>
        </div>
      `).join('');
    }

    // Load Activity Log
    function loadActivityLog() {
      const container = document.getElementById('activityLog');
      container.innerHTML = dashboardData.activities.map(activity => `
        <div class="flex items-start gap-4 p-4 bg-slate-800/30 rounded-xl hover:bg-slate-800/50 transition-all">
          <div class="w-10 h-10 bg-${activity.color}-500/20 rounded-lg flex items-center justify-center flex-shrink-0">
            <i class="fas ${activity.icon} text-${activity.color}-400"></i>
          </div>
          <div class="flex-1">
            <div class="text-sm">${activity.text}</div>
            <div class="text-xs text-gray-500 mt-1">${activity.time}</div>
          </div>
        </div>
      `).join('');
    }

    // User Growth Chart
    function createUserGrowthChart() {
      const ctx = document.getElementById('userGrowthChart').getContext('2d');
      new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
          datasets: [{
            label: 'New Users',
            data: [12, 19, 15, 25, 22, 30, 28],
            borderColor: '#8b5cf6',
            backgroundColor: 'rgba(139, 92, 246, 0.1)',
            borderWidth: 3,
            fill: true,
            tension: 0.4
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { display: false }
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: { color: 'rgba(148, 163, 184, 0.1)' },
              ticks: { color: '#94a3b8' }
            },
            x: {
              grid: { display: false },
              ticks: { color: '#94a3b8' }
            }
          }
        }
      });
    }

    // Revenue Chart
    function createRevenueChart() {
      const ctx = document.getElementById('revenueChart').getContext('2d');
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
          datasets: [{
            label: 'Revenue',
            data: [18500, 22300, 19800, 26800],
            backgroundColor: [
              'rgba(6, 182, 212, 0.8)',
              'rgba(139, 92, 246, 0.8)',
              'rgba(236, 72, 153, 0.8)',
              'rgba(34, 197, 94, 0.8)'
            ],
            borderRadius: 8,
            borderWidth: 0
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { display: false }
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: { color: 'rgba(148, 163, 184, 0.1)' },
              ticks: { 
                color: '#94a3b8',
                callback: function(value) {
                  return '$' + (value / 1000) + 'K';
                }
              }
            },
            x: {
              grid: { display: false },
              ticks: { color: '#94a3b8' }
            }
          }
        }
      });
    }

    // Animate Stats
    function animateStats() {
      const stats = [
        { id: 'totalUsers', target: 1247, prefix: '', suffix: '' },
        { id: 'activeProjects', target: 543, prefix: '', suffix: '' },
        { id: 'revenue', target: 87.4, prefix: '$', suffix: 'K' },
        { id: 'tickets', target: 24, prefix: '', suffix: '' }
      ];

      stats.forEach(stat => {
        const element = document.getElementById(stat.id);
        let current = 0;
        const increment = stat.target / 50;
        const timer = setInterval(() => {
          current += increment;
          if (current >= stat.target) {
            current = stat.target;
            clearInterval(timer);
          }
          element.textContent = stat.prefix + (stat.suffix === 'K' ? current.toFixed(1) : Math.floor(current)) + stat.suffix;
        }, 20);
      });
    }

    // Logout Function
    function logout() {
      if (confirm('Are you sure you want to logout?')) {
        localStorage.removeItem('adminToken');
        window.location.href = 'admin-login.html';
      }
    }

    // Check Authentication
    function checkAuth() {
      const token = localStorage.getItem('adminToken');
      if (!token) {
        window.location.href = 'admin-login.html';
        return false;
      }
      return true;
    }

    // Initialize Dashboard
    document.addEventListener('DOMContentLoaded', function() {
      if (!checkAuth()) return;
      
      // Load admin name from localStorage
      const adminName = localStorage.getItem('adminName') || 'Admin User';
      document.getElementById('adminName').textContent = adminName;

      // Load all data
      loadRecentUsers();
      loadTopProducts();
      loadActivityLog();
      createUserGrowthChart();
      createRevenueChart();
      animateStats();

      // Auto-refresh data every 30 seconds
      setInterval(() => {
        loadActivityLog();
      }, 30000);
    });

    // Real-time updates simulation
    setInterval(() => {
      const totalUsers = document.getElementById('totalUsers');
      const current = parseInt(totalUsers.textContent);
      totalUsers.textContent = current + Math.floor(Math.random() * 3);
    }, 60000);
  </script>
</body>
</html>
