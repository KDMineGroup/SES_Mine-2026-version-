<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard | SES_MINE</title>
  <link rel="icon" type="image/png" href="https://cdn.grapesjs.com/workspaces/cmjdh0oo603xm12grpuiruk7p/assets/f6b95b3d-49d1-4e77-b952-49ed80c4befa__image-9-14-1404-ap-at-8.42-pm.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <style>
    * { 
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #2a2f4a 100%);
      min-height: 100vh;
    }
    .gradient-text { 
      background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%); 
      -webkit-background-clip: text; 
      -webkit-text-fill-color: transparent; 
    }
    .stat-card {
      transition: all 0.3s ease;
      cursor: pointer;
    }
    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(139, 92, 246, 0.3);
    }
    .slide-in {
      animation: slideIn 0.5s ease-out;
    }
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    #loadingScreen {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #2a2f4a 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
  </style>
</head>
<body class="text-white">
  <!-- Loading Screen -->
  <div id="loadingScreen">
    <div class="text-center">
      <i class="fas fa-spinner fa-spin text-6xl text-purple-500 mb-4"></i>
      <p class="text-xl font-semibold">Loading Dashboard...</p>
    </div>
  </div>

  <!-- Main Content (Hidden until loaded) -->
  <div id="mainContent" style="display: none;">
    <!-- Top Navigation -->
    <nav class="fixed w-full z-50 bg-slate-900/95 backdrop-blur-xl border-b border-slate-800 shadow-2xl">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 py-4">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-4 sm:gap-8">
            <a href="../index.html" class="flex items-center gap-3">
              <img src="https://cdn.grapesjs.com/workspaces/cmjdh0oo603xm12grpuiruk7p/assets/f6b95b3d-49d1-4e77-b952-49ed80c4befa__image-9-14-1404-ap-at-8.42-pm.png" alt="SES_MINE" class="h-10 sm:h-12">
            </a>
            <div class="hidden md:flex items-center gap-6">
              <a href="admin-dashboard.html" class="text-purple-500 font-semibold flex items-center gap-2">
                <i class="fas fa-chart-line"></i>
                <span>Dashboard</span>
              </a>
              <a href="user-management.html" class="text-gray-400 hover:text-white transition-colors flex items-center gap-2">
                <i class="fas fa-users"></i>
                <span>Users</span>
              </a>
              <a href="content-management.html" class="text-gray-400 hover:text-white transition-colors flex items-center gap-2">
                <i class="fas fa-edit"></i>
                <span>Content</span>
              </a>
            </div>
          </div>
          <div class="flex items-center gap-3 sm:gap-4">
            <div class="hidden sm:flex items-center gap-3 bg-slate-800/50 px-4 py-2 rounded-lg">
              <img src="https://i.pravatar.cc/100?img=5" alt="Admin" class="w-8 h-8 rounded-full border-2 border-purple-500">
              <div>
                <div class="text-sm font-semibold" id="adminName">Admin</div>
                <div class="text-xs text-gray-400" id="adminEmail">admin@sesmine.com</div>
              </div>
            </div>
            <button onclick="handleLogout()" class="bg-red-500/20 hover:bg-red-500/30 border border-red-500/50 text-red-400 px-3 sm:px-4 py-2 rounded-lg transition-colors text-sm font-semibold">
              <i class="fas fa-sign-out-alt mr-2"></i>
              <span class="hidden sm:inline">Logout</span>
            </button>
          </div>
        </div>
      </div>
    </nav>

    <!-- Dashboard Content -->
    <div class="pt-24 pb-12 px-4 sm:px-6">
      <div class="max-w-7xl mx-auto">
        <!-- Welcome Header -->
        <div class="mb-8 slide-in">
          <h1 class="text-3xl sm:text-4xl font-black mb-2">
            Welcome back, <span class="gradient-text" id="welcomeName">Admin</span>! ðŸ‘‹
          </h1>
          <p class="text-gray-400">Here's what's happening with SES_MINE today.</p>
          <p class="text-sm text-gray-500 mt-2">
            <i class="fas fa-clock mr-2"></i>
            <span id="currentDateTime"></span>
          </p>
        </div>

        <!-- Stats Grid -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8">
          <!-- Total Users -->
          <div class="stat-card bg-gradient-to-br from-purple-500/10 to-purple-900/10 border border-purple-500/20 rounded-2xl p-6 slide-in">
            <div class="flex items-center justify-between mb-4">
              <div class="w-12 h-12 sm:w-14 sm:h-14 bg-purple-500/20 rounded-xl flex items-center justify-center">
                <i class="fas fa-users text-purple-400 text-xl sm:text-2xl"></i>
              </div>
              <span class="text-green-400 text-xs sm:text-sm font-semibold">+12.5%</span>
            </div>
            <div class="text-2xl sm:text-3xl font-black mb-1" id="totalUsers">0</div>
            <div class="text-gray-400 text-xs sm:text-sm">Total Users</div>
          </div>

          <!-- Active Projects -->
          <div class="stat-card bg-gradient-to-br from-cyan-500/10 to-cyan-900/10 border border-cyan-500/20 rounded-2xl p-6 slide-in" style="animation-delay: 0.1s">
            <div class="flex items-center justify-between mb-4">
              <div class="w-12 h-12 sm:w-14 sm:h-14 bg-cyan-500/20 rounded-xl flex items-center justify-center">
                <i class="fas fa-project-diagram text-cyan-400 text-xl sm:text-2xl"></i>
              </div>
              <span class="text-green-400 text-xs sm:text-sm font-semibold">+8.2%</span>
            </div>
            <div class="text-2xl sm:text-3xl font-black mb-1" id="activeProjects">0</div>
            <div class="text-gray-400 text-xs sm:text-sm">Active Projects</div>
          </div>

          <!-- Revenue -->
          <div class="stat-card bg-gradient-to-br from-green-500/10 to-green-900/10 border border-green-500/20 rounded-2xl p-6 slide-in" style="animation-delay: 0.2s">
            <div class="flex items-center justify-between mb-4">
              <div class="w-12 h-12 sm:w-14 sm:h-14 bg-green-500/20 rounded-xl flex items-center justify-center">
                <i class="fas fa-dollar-sign text-green-400 text-xl sm:text-2xl"></i>
              </div>
              <span class="text-green-400 text-xs sm:text-sm font-semibold">+23.1%</span>
            </div>
            <div class="text-2xl sm:text-3xl font-black mb-1" id="revenue">$0</div>
            <div class="text-gray-400 text-xs sm:text-sm">Monthly Revenue</div>
          </div>

          <!-- Support Tickets -->
          <div class="stat-card bg-gradient-to-br from-amber-500/10 to-amber-900/10 border border-amber-500/20 rounded-2xl p-6 slide-in" style="animation-delay: 0.3s">
            <div class="flex items-center justify-between mb-4">
              <div class="w-12 h-12 sm:w-14 sm:h-14 bg-amber-500/20 rounded-xl flex items-center justify-center">
                <i class="fas fa-ticket-alt text-amber-400 text-xl sm:text-2xl"></i>
              </div>
              <span class="text-red-400 text-xs sm:text-sm font-semibold">+3</span>
            </div>
            <div class="text-2xl sm:text-3xl font-black mb-1" id="tickets">0</div>
            <div class="text-gray-400 text-xs sm:text-sm">Open Tickets</div>
          </div>
        </div>

        <!-- Success Message -->
        <div class="bg-green-500/20 border border-green-500/50 rounded-2xl p-6 mb-8 slide-in">
          <div class="flex items-center gap-4">
            <div class="w-12 h-12 bg-green-500/30 rounded-xl flex items-center justify-center flex-shrink-0">
              <i class="fas fa-check-circle text-green-400 text-2xl"></i>
            </div>
            <div>
              <h3 class="font-bold text-lg mb-1">Dashboard Loaded Successfully!</h3>
              <p class="text-sm text-gray-300">You are now logged in and can access all admin features.</p>
            </div>
          </div>
        </div>

        <!-- Quick Stats -->
        <div class="bg-slate-900/50 backdrop-blur-xl border border-slate-800 rounded-2xl p-6 slide-in">
          <h3 class="text-xl font-bold mb-6">
            <i class="fas fa-chart-bar text-purple-500 mr-2"></i>
            Quick Overview
          </h3>
          <div class="grid md:grid-cols-3 gap-6">
            <div>
              <div class="text-3xl font-black gradient-text mb-2">94.2%</div>
              <div class="text-sm text-gray-400">System Uptime</div>
            </div>
            <div>
              <div class="text-3xl font-black gradient-text mb-2">2.5B+</div>
              <div class="text-sm text-gray-400">Value Managed</div>
            </div>
            <div>
              <div class="text-3xl font-black gradient-text mb-2">10K+</div>
              <div class="text-sm text-gray-400">Equipment Database</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Check Authentication
    function checkAuth() {
      const adminToken = localStorage.getItem('adminToken');
      const adminEmail = localStorage.getItem('adminEmail');
      const adminName = localStorage.getItem('adminName');

      console.log('Checking authentication...');
      console.log('Token:', adminToken);
      console.log('Email:', adminEmail);
      console.log('Name:', adminName);

      if (!adminToken || !adminEmail) {
        console.log('No valid session found, redirecting to login...');
        alert('Please login first to access the admin dashboard.');
        window.location.href = 'admin-login.html';
        return false;
      }

      console.log('Authentication successful!');
      return true;
    }

    // Load Admin Info
    function loadAdminInfo() {
      const adminName = localStorage.getItem('adminName') || 'Admin User';
      const adminEmail = localStorage.getItem('adminEmail') || 'admin@sesmine.com';

      document.getElementById('adminName').textContent = adminName;
      document.getElementById('adminEmail').textContent = adminEmail;
      document.getElementById('welcomeName').textContent = adminName.split(' ')[0];
    }

    // Update Date Time
    function updateDateTime() {
      const now = new Date();
      const options = { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric', 
        hour: '2-digit', 
        minute: '2-digit' 
      };
      document.getElementById('currentDateTime').textContent = now.toLocaleDateString('en-US', options);
    }

    // Animate Counter
    function animateCounter(element, target, prefix = '', suffix = '', decimals = 0) {
      let current = 0;
      const increment = target / 50;
      const timer = setInterval(() => {
        current += increment;
        if (current >= target) {
          current = target;
          clearInterval(timer);
        }
        const value = decimals > 0 ? current.toFixed(decimals) : Math.floor(current);
        element.textContent = prefix + value.toLocaleString() + suffix;
      }, 20);
    }

    // Load Dashboard Data
    function loadDashboard() {
      console.log('Loading dashboard data...');
      
      // Animate stats
      setTimeout(() => {
        animateCounter(document.getElementById('totalUsers'), 1247);
        animateCounter(document.getElementById('activeProjects'), 543);
        animateCounter(document.getElementById('revenue'), 87.4, '$', 'K', 1);
        animateCounter(document.getElementById('tickets'), 24);
      }, 500);
    }

    // Handle Logout
    function handleLogout() {
      if (confirm('Are you sure you want to logout?')) {
        console.log('Logging out...');
        
        // Clear all admin data
        localStorage.removeItem('adminToken');
        localStorage.removeItem('adminEmail');
        localStorage.removeItem('adminName');
        localStorage.removeItem('loginTime');
        
        // Show message
        alert('You have been logged out successfully.');
        
        // Redirect to login
        window.location.href = 'admin-login.html';
      }
    }

    // Initialize Dashboard
    function initDashboard() {
      console.log('Initializing dashboard...');
      
      // Check authentication first
      if (!checkAuth()) {
        return;
      }

      // Load admin info
      loadAdminInfo();

      // Update date/time
      updateDateTime();
      setInterval(updateDateTime, 60000);

      // Load dashboard data
      loadDashboard();

      // Hide loading screen and show content
      setTimeout(() => {
        document.getElementById('loadingScreen').style.display = 'none';
        document.getElementById('mainContent').style.display = 'block';
        console.log('Dashboard loaded successfully!');
      }, 1000);
    }

    // Run on page load
    document.addEventListener('DOMContentLoaded', initDashboard);

    // Prevent back button after logout
    window.addEventListener('pageshow', function(event) {
      if (event.persisted) {
        window.location.reload();
      }
    });
  </script>
</body>
</html>
